# Epistemic Engine v3.0

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π —Å –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–º –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º**

---

### –û –ø—Ä–æ–µ–∫—Ç–µ

**Epistemic Engine v3.0** ‚Äî —ç—Ç–æ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –ò–ò-–∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–∑–∞–¥–∞—á. –°–∏—Å—Ç–µ–º–∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç, –∞ –∏–º–∏—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è. –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **LangGraph** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ **Cognitive Layer** –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è "–º—ã—Å–ª–µ–π" –∞–≥–µ–Ω—Ç–æ–≤.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω—ã—Ö —á–∞—Ç-–±–æ—Ç–æ–≤, –∑–¥–µ—Å—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–æ–Ω–≤–µ–π–µ—Ä: –æ—Ç –ø—Å–∏—Ö–æ–∞–Ω–∞–ª–∏–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∞–∫—Ç–æ–≤ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –≥—Ä–∞—Ñ (DAG). –ó–∞–ø—Ä–æ—Å –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä, "–ª–µ—á–µ–±–Ω—ã–µ" –º–æ–¥—É–ª–∏, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏ —Å–∏–Ω—Ç–µ–∑.

```mermaid
flowchart TB
 subgraph subGraph0["ZONE 1: ROUTING & CONTEXT"]
        Orch{"Orchestrator"}
        Solvers("–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫")
        Therapist["–¢–µ—Ä–∞–ø–µ–≤—Ç<br><i>–°–Ω—è—Ç–∏–µ —Å—Ç—Ä–µ—Å—Å–∞</i>"]
        Consig["–ö–æ–Ω—Å–∏–ª—å–µ—Ä–∏<br><i>–û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤</i>"]
        PostMortem["Post-Mortem<br><i>–ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫</i>"]
  end
 subgraph subGraph1["ZONE 2: COGNITIVE PARALLELISM"]
        Triz["–¢–†–ò–ó –ê–≥–µ–Ω—Ç<br><i>ProblemType: DESIGN</i>"]
        Sys["–°–∏—Å—Ç–µ–º–Ω—ã–π –ê–Ω–∞–ª–∏—Ç–∏–∫<br><i>ProblemType: DIAGNOSIS</i>"]
        Crit["–ö—Ä–∏—Ç–∏–∫ / –†–∏—Å–∫–∏<br><i>ProblemType: DIAGNOSIS</i>"]
  end
 subgraph subGraph2["ZONE 3: VERIFICATION & SYNTHESIS"]
        FactCheck["Fact Checker<br><i>DuckDuckGo Search</i>"]
        Synthesizer("–°–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä –†–µ—à–µ–Ω–∏—è")
  end
    User("–í—Ö–æ–¥: –ó–∞–ø—Ä–æ—Å") --> Orch
    Orch -- CHITCHAT --> Output("–§–∏–Ω–∞–ª—å–Ω—ã–π –û—Ç–≤–µ—Ç")
    Orch -. SOLVER .-> Solvers
    Orch -. THERAPIST .-> Therapist
    Orch -. CONSIGLIERE .-> Consig
    Output == RETRY ==> PostMortem
    Therapist --> Solvers
    Consig --> Solvers
    PostMortem --> Solvers
    Solvers --> Triz & Sys & Crit
    Triz --> FactCheck
    Sys --> FactCheck
    Crit --> FactCheck
    FactCheck --> Synthesizer
    Synthesizer --> Output

     Orch:::orchestrator
     Solvers:::solvers
     Therapist:::support
     Consig:::support
     PostMortem:::support
     Triz:::solvers
     Sys:::solvers
     Crit:::solvers
     FactCheck:::synthesis
     Synthesizer:::synthesis
     User:::input
     Output:::input
    classDef input fill:#FAFAF1,stroke:#333,stroke-width:1px,color:#000
    classDef orchestrator fill:#00703B,stroke:#fff,stroke-width:2px,color:#fff 
    classDef support fill:#429538,stroke:#fff,stroke-width:1px,color:#fff
    classDef solvers fill:#7CC344,stroke:#333,stroke-width:1px,color:#000
    classDef synthesis fill:#E3E6A1,stroke:#333,stroke-width:1px,color:#000
````

### üß© –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1\. Orchestrator (–î–∏—Å–ø–µ—Ç—á–µ—Ä)

–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

  * **Solver**: –û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á.
  * **Therapist**: –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –ø–∞–Ω–∏–∫–µ –∏–ª–∏ —Å—Ç—Ä–µ—Å—Å–µ, —Å–Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Å–∏—Ö–æ–ª–æ–≥.
  * **Consigliere**: –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å "–º—É—Ç–Ω—ã–π" –∏–ª–∏ –Ω–µ—ç—Ç–∏—á–Ω—ã–π, –≤—ã–¥–∞–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è—Ö.
  * **Retry**: –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ–¥–æ–≤–æ–ª–µ–Ω –ø—Ä–æ—à–ª—ã–º –æ—Ç–≤–µ—Ç–æ–º, –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫ (`Post-Mortem`).

#### 2\. Cognitive Layer (–ö–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–π —Å–ª–æ–π)

–≠—Ç–æ "–Ω–∞–¥—Å—Ç—Ä–æ–π–∫–∞" –Ω–∞–¥ –ø—Ä–æ–º–ø—Ç–∞–º–∏ (`cognitive_layer.py`). –û–Ω–∞ –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ–¥–µ–ª–∏ –¥—É–º–∞—Ç—å –ø–æ —à–∞–±–ª–æ–Ω—É –ø–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º.

  * **–†–µ–∂–∏–º DIAGNOSIS**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤. –®–∞–≥–∏: –°—Ç—Ä–∞—Ç–µ–≥–∏—è -\> –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è -\> –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ -\> –í—ã–≤–æ–¥.
  * **–†–µ–∂–∏–º DESIGN**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¢–†–ò–ó. –®–∞–≥–∏: –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è -\> –ò–ö–† (–ò–¥–µ–∞–ª—å–Ω—ã–π –∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç) -\> –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è -\> –°–∏–Ω—Ç–µ–∑.

#### 3\. Parallel Solvers (–≠–∫—Å–ø–µ—Ä—Ç—ã)

–¢—Ä–∏ –∞–≥–µ–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:

  * **–¢–†–ò–ó-–ê–≥–µ–Ω—Ç**: –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∏–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ.
  * **–°–∏—Å—Ç–µ–º–Ω—ã–π –ê–Ω–∞–ª–∏—Ç–∏–∫**: –ò—â–µ—Ç "–±—É—Ç—ã–ª–æ—á–Ω—ã–µ –≥–æ—Ä–ª—ã—à–∫–∞" –∏ —Ä–µ—Å—É—Ä—Å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è.
  * **–ö—Ä–∏—Ç–∏–∫**: –í—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–æ–ª—å "–ê–¥–≤–æ–∫–∞—Ç–∞ –¥—å—è–≤–æ–ª–∞", –∏—â–µ—Ç —Ä–∏—Å–∫–∏.

#### 4\. Fact Checker & Synthesizer

  * **Fact Checker**: –ë–µ—Ä–µ—Ç –∏–¥–µ—é –¢–†–ò–ó-–∞–≥–µ–Ω—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ—ë —á–µ—Ä–µ–∑ DuckDuckGo. –û—Ç—Å–µ–∏–≤–∞–µ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏.
  * **Synthesizer**: –°–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –º–Ω–µ–Ω–∏—è –∏ —Ñ–∞–∫—Ç—ã –≤ –æ–¥–∏–Ω —Å–≤—è–∑–Ω—ã–π Markdown-–æ—Ç—á–µ—Ç.

-----

### üöÄ –ó–∞–ø—É—Å–∫

#### –í–∞—Ä–∏–∞–Ω—Ç 1: CLI (–ö–æ–Ω—Å–æ–ª—å)

–ö—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –±–∞–∑–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `Rich`. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤.

```bash
python main.py
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: Telegram Bot

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –±–æ—Ç –Ω–∞ `aiogram` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

```bash
python bot.py
```

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

1.  –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
    ```env
    OPENROUTER_API_KEY=sk-or-v1-...
    TELEGRAM_BOT_TOKEN=123456:ABC...
    POSTGRES_USER=admin
    POSTGRES_PASSWORD=admin
    ```
2.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
    ```bash
    pip install -r requirements.txt
    ```
3.  –î–ª—è –±–æ—Ç–∞ –Ω—É–∂–µ–Ω PostgreSQL (–º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Docker):
    ```bash
    docker-compose up -d
    ```

-----

*Stack: Python 3.11, LangGraph, LangChain, OpenAI/OpenRouter, PostgreSQL, Rich.*
